<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Live Sports Home - Demo</title>

  <!-- hls.js CDN (for playing m3u8 in browsers that need it) -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.0/dist/hls.min.js"></script>

  <style>
    :root{
      --bg:#111;
      --card:#1a1a1a;
      --accent:#ff6b35;
      --muted:#bdbdbd;
      --white:#fff;
      --radius:12px;
    }
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{margin:0; background:var(--bg); color:var(--white); min-height:100vh; display:flex; flex-direction:column; align-items:stretch;}
    .container{max-width:420px; margin:0 auto; width:100%; padding:12px 14px 90px;} /* center for mobile width */
    .greeting{font-size:20px; font-weight:700; margin:6px 0 12px;}
    /* Carousel */
    .carousel{position:relative; width:100%; height:160px; border-radius:18px; overflow:hidden; background:#222;}
    .carousel-track{display:flex; height:100%; transition:transform 600ms ease;}
    .carousel-item{min-width:100%; height:100%; position:relative; padding:8px;}
    .carousel-item img{width:100%; height:100%; object-fit:cover; border-radius:14px; display:block; box-shadow:inset 0 0 0 6px rgba(0,0,0,0.25);}
    .carousel-dot-wrap{position:absolute; left:12px; bottom:12px; display:flex; gap:8px;}
    .dot{width:8px;height:8px;border-radius:999px;background:rgba(255,255,255,0.3); cursor:pointer;}
    .dot.active{background:var(--accent); box-shadow:0 0 6px rgba(255,107,53,0.4);}
    /* Live sports grid */
    .section-title{color:var(--accent); margin:18px 0 8px; font-weight:700;}
    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px;}
    .card{background:var(--card); border-radius:10px; padding:6px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.6); cursor:pointer; border:3px solid transparent;}
    .card img{width:100%; height:66px; object-fit:cover; border-radius:8px;}
    .card p{margin:8px 4px 4px; font-size:12px; color:var(--muted);}
    .card:active{transform:translateY(2px);}
    /* modal player */
    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.6); z-index:60; padding:18px;}
    .modal.open{display:flex;}
    .player-card{width:100%; max-width:720px; background:#000; border-radius:12px; overflow:hidden; box-shadow:0 12px 30px rgba(0,0,0,0.7);}
    .player-header{display:flex; justify-content:space-between; align-items:center; padding:10px 12px; background:#111;}
    .player-header h4{margin:0; font-size:14px;}
    .close-btn{background:transparent;border:0;color:var(--muted); font-size:20px; cursor:pointer;}
    video{width:100%; height:320px; background:#000; display:block;}
    .player-actions{padding:10px;}
    .player-actions small{color:var(--muted);}
    /* bottom nav */
    .bottom-nav{position:fixed; left:0; right:0; bottom:0; height:64px; background:#000; border-top:1px solid rgba(255,255,255,0.03); display:flex; justify-content:center; align-items:center; z-index:80;}
    .nav-inner{max-width:420px; width:100%; padding:0 10px; display:flex; justify-content:space-between; align-items:center;}
    .nav-btn{flex:1; text-align:center; color:var(--muted); font-size:12px; padding:8px 6px;}
    .nav-btn.active{color:var(--accent);}
    .home-pill{position:absolute; left:12px; bottom:68px; background:var(--accent); padding:8px 18px; border-radius:999px; color:#fff; box-shadow:0 8px 22px rgba(0,0,0,0.5);}
    /* responsive tweaks */
    @media(min-width:600px){
      .carousel{height:200px;}
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="greeting" id="greeting">Hello! Good morning.</div>

    <!-- Carousel / posters -->
    <div class="carousel" id="carousel">
      <div class="carousel-track" id="carouselTrack">
        <!-- --------- Replace these images with your own poster images --------- -->
        <div class="carousel-item" data-walink="https://chat.whatsapp.com/IbWWO9mim0rGCmVcA11CWI?mode=ems_copy_t">
          <img src="https://via.placeholder.com/800x400?text=Poster+1" alt="poster1" />
        </div>
        <div class="carousel-item" data-walink="https://chat.whatsapp.com/IbWWO9mim0rGCmVcA11CWI?mode=ems_copy_t">
          <img src="https://via.placeholder.com/800x400?text=Poster+2" alt="poster2" />
        </div>
        <div class="carousel-item" data-walink="https://chat.whatsapp.com/IbWWO9mim0rGCmVcA11CWI?mode=ems_copy_t">
          <img src="https://via.placeholder.com/800x400?text=Poster+3" alt="poster3" />
        </div>
      </div>
      <div class="carousel-dot-wrap" id="dots"></div>
    </div>

    <div class="section-title">Live Sports</div>

    <!-- Grid of channels/cards -->
    <div class="grid" id="grid">
      <!-- Example card. Replace image src and data-link with your m3u8 -->
      <div class="card" data-title="EPL" data-link="https://cdn10khi.tamashaweb.com:8087/jazzauth/EPL-A-abr/playlist.m3u8">
        <img src="https://via.placeholder.com/200x120?text=EPL" alt="EPL" />
        <p>Premier League</p>
      </div>

      <div class="card" data-title="BAN vs AFG" data-link="https://cdn01isb-n.tamashaweb.com:8087/jazzauth/AFGVSBAN-abr/playlist.m3u8">
        <img src="https://via.placeholder.com/200x120?text=BAN+vs+AFG" alt="BANvsAFG" />
        <p>Bangladesh vs Afghanistan</p>
      </div>

      <div class="card" data-title="PTV" data-link="https://ptvstream1.nayatel.com:8096/transcoder/ptvhometrc_source/chunks.m3u8">
        <img src="https://via.placeholder.com/200x120?text=PTV" alt="PTV" />
        <p>PTV Sports</p>
      </div>

      <div class="card" data-title="Ten Sports" data-link="https://cdn07isb.tamashaweb.com:8087/YlUHeDQb7a/157-3H/playlist.m3u8">
        <img src="https://via.placeholder.com/200x120?text=Ten+Sports" alt="TenSports" />
        <p>Ten Sports</p>
      </div>

      <!-- Add more cards as needed -->
      <div class="card" data-title="Channel 5" data-link="https://cdn.example.com/stream/chan5/playlist.m3u8">
        <img src="https://via.placeholder.com/200x120?text=Channel+5" alt="ch5" />
        <p>Channel 5</p>
      </div>

      <div class="card" data-title="Eurosport" data-link="https://cdn.example.com/eurosport/stream.m3u8">
        <img src="https://via.placeholder.com/200x120?text=Eurosport" alt="eurosport" />
        <p>Eurosport</p>
      </div>
    </div>
  </div>

  <!-- Player modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="player-card">
      <div class="player-header">
        <h4 id="playerTitle">Playing</h4>
        <button class="close-btn" id="closeBtn" aria-label="Close">‚úï</button>
      </div>
      <video id="video" controls playsinline webkit-playsinline></video>
      <div class="player-actions">
        <small id="streamUrl" style="word-break:break-all;color:var(--muted)"></small>
      </div>
    </div>
  </div>

  <!-- bottom nav -->
  <div class="bottom-nav">
    <div class="nav-inner">
      <div class="nav-btn active">
        <div style="font-size:20px">üè†</div>
        <div>Home</div>
      </div>
      <div class="nav-btn">
        <div style="font-size:20px">üì∫</div>
        <div>Live Tv</div>
      </div>
      <div class="nav-btn">
        <div style="font-size:20px">üé¨</div>
        <div>Movies</div>
      </div>
    </div>
  </div>

  <script>
    // ====== Greeting based on user's local time ======
    function updateGreeting(){
      const el = document.getElementById('greeting');
      const now = new Date();
      const hr = now.getHours();
      let text = "Hello!";
      if(hr >= 5 && hr < 12) text = "Good morning.";
      else if(hr >= 12 && hr < 17) text = "Good afternoon.";
      else if(hr >= 17 && hr < 21) text = "Good evening.";
      else text = "Hello!";
      el.textContent = text;
    }
    updateGreeting();

    // ====== Carousel logic (auto-slide + dots + click opens WhatsApp) ======
    const track = document.getElementById('carouselTrack');
    const items = Array.from(track.children);
    const dotsWrap = document.getElementById('dots');
    let current = 0, carouselInterval = null;
    function buildDots(){
      items.forEach((it,i)=>{
        const d = document.createElement('div');
        d.className = 'dot' + (i===0 ? ' active':'');
        d.addEventListener('click', ()=>{ goTo(i); resetAuto(); });
        dotsWrap.appendChild(d);
      });
    }
    function setActiveDot(i){
      Array.from(dotsWrap.children).forEach((d,idx)=> d.classList.toggle('active', idx===i));
    }
    function goTo(i){
      current = i;
      track.style.transform = `translateX(-${i*100}%)`;
      setActiveDot(i);
    }
    function nextSlide(){ goTo((current+1) % items.length); }
    function resetAuto(){ clearInterval(carouselInterval); carouselInterval = setInterval(nextSlide, 4000); }
    buildDots();
    resetAuto();

    // click on carousel item: open whatsapp (each item has data-walink)
    items.forEach(it=>{
      it.style.cursor='pointer';
      it.addEventListener('click',(e)=>{
        const url = it.dataset.walink || 'https://chat.whatsapp.com/IbWWO9mim0rGCmVcA11CWI?mode=ems_copy_t';
        // open in new tab
        window.open(url, '_blank');
      });
    });

    // ====== Grid cards: open modal and play m3u8 ======
    const grid = document.getElementById('grid');
    const modal = document.getElementById('modal');
    const video = document.getElementById('video');
    const playerTitle = document.getElementById('playerTitle');
    const streamUrlEl = document.getElementById('streamUrl');
    const closeBtn = document.getElementById('closeBtn');
    let hls = null;

    function openPlayer(title, url){
      playerTitle.textContent = title;
      streamUrlEl.textContent = url;
      modal.classList.add('open');

      // stop previous
      if(hls){ try{ hls.destroy(); }catch(e){} hls = null; }
      video.pause();
      video.removeAttribute('src');
      video.load();

      // If browser supports native HLS (Safari), set src directly
      if(video.canPlayType('application/vnd.apple.mpegurl')){
        video.src = url;
        video.play().catch(()=>{});
      } else if (Hls.isSupported()){
        hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, function() {
          video.play().catch(()=>{});
        });
        hls.on(Hls.Events.ERROR, function (event, data) {
          console.warn('HLS error', data);
        });
      } else {
        alert('Your browser cannot play HLS streams. Use a modern browser (Chrome/Firefox/Safari) or test on mobile app.');
      }
    }

    // attach click handlers to cards
    document.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('click', ()=> {
        const link = card.dataset.link;
        const title = card.dataset.title || 'Live Stream';
        if(!link){
          alert('No stream link provided for this channel.');
          return;
        }
        openPlayer(title, link);
      });
    });

    // close modal
    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });
    function closeModal(){
      modal.classList.remove('open');
      try{ if(hls){ hls.destroy(); hls = null; } }catch(e){}
      video.pause();
      video.removeAttribute('src');
      video.load();
    }

    // pause video when page hidden
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden){ video.pause(); }
    });

    // Optional: keyboard ESC to close
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });

    // If you want posters to auto-loop continuously even when user hovered, current code does so.
  </script>
</body>
  </html>
